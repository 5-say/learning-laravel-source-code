<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>Learning-laravel-source-code by 5-say</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="../stylesheets/normalize.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../stylesheets/github-light.css" media="screen">
        <style>
            .l2 { margin-left: 2em; }
            .l3 { margin-left: 4em; }
            .l4 { margin-left: 6em; }
            pre a { border-bottom: dotted 2px #9FCCFC; }
            pre a:hover span { color: #6AB0F7; }
        </style>
        <link rel="stylesheet" href="../highlight/src/styles/obsidian.css">
        <script src="../highlight/src/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="../highlight/src/jquery-2.1.1.min.js"></script>
    </head>
    <body>
        <section class="page-header" style="padding: 0;">
            <h1 class="project-name">Learning-laravel-source-code</h1>
            <h2 class="project-tagline">Laravel 注释翻译、源码学习、完整包。</h2>
            <a href="../index.html" class="btn">回到首页</a>
            <a href="https://github.com/5-say/learning-laravel-source-code/issues/new" class="btn" target="_blank">问题反馈</a>
        </section>

        <section class="main-content">

            <h2>入口文件 <a href="@public/index.php">public/index.php</a></h2>




<pre><code class="php"># 注册自动加载
require __DIR__.'/../<a href="@bootstrap/autoload.php">bootstrap/autoload.php</a>';
</code></pre>

<pre class="l2"><code class="php"># 申明常量 LARAVEL_START 记录应用程序开始时间
define('LARAVEL_START', microtime(true));

# 注册 Composer 自动加载程序
require __DIR__.'/../vendor/autoload.php';

# 加载预编译的类文件
$compiledPath = __DIR__.'/../vendor/compiled.php';

if (file_exists($compiledPath))
{
    require $compiledPath;
}
</code></pre>

<pre><code class="php"># 获取应用程序实例
$app = require_once __DIR__.'/../<a href="@bootstrap/app.php">bootstrap/app.php</a>';
</code></pre>

<pre class="l2"><code class="php"># 实例化应用程序

// <a href="Application.html#__construct">Illuminate/Foundation/Application.php@__construct</a>
$app = new Illuminate\Foundation\Application(
    <a href="php#realpath">realpath</a>(__DIR__.'/../') // 应用程序基础路径（根目录）
);


# 绑定重要接口

// $app->singleton(); 注册单例
// <a href="Container.html#singleton">Illuminate\Container\Container.php@singleton</a>

// http
$app->singleton(
    'Illuminate\Contracts\Http\Kernel',
    'App\Http\Kernel'
);
// 控制台
$app->singleton(
    'Illuminate\Contracts\Console\Kernel',
    'App\Console\Kernel'
);
// 异常处理
$app->singleton(
    'Illuminate\Contracts\Debug\ExceptionHandler',
    'App\Exceptions\Handler'
);

# 返回应用程序实例
return $app;
</code></pre>

<pre><code class="php"># 运行应用程序
$kernel = $app->make('Illuminate\Contracts\Http\Kernel');

$response = $kernel->handle(
    $request = Illuminate\Http\Request::capture()
);

$response->send();

$kernel->terminate($request, $response);
</code></pre>


            <script src="main.js"></script>

        </section>


    
    </body>
</html>

