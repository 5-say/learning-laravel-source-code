<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Learning-laravel-source-code by 5-say</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <style>
        .l2 { margin-left: 2em; }
        .l3 { margin-left: 4em; }
        .l4 { margin-left: 6em; }
    </style>
  </head>
  <body>
    <section class="page-header" style="padding: 0;">
      <h1 class="project-name"><a href="index.html" class="btn">Learning-laravel-source-code</a></h1>
    </section>

    <section class="main-content">

      <h2>入口文件 /public/<a href="public/index.php">index.php</a></h2>


<pre>
# 注册自动加载
require __DIR__.'/../bootstrap/<a href="bootstrap/autoload.php">autoload.php</a>';
</pre>

<pre class="l2">
# 申明常量 LARAVEL_START 记录应用程序开始时间
define('LARAVEL_START', microtime(true));

# 注册 Composer 自动加载程序
require __DIR__.'/../vendor/autoload.php';

# 加载预编译的类文件
$compiledPath = __DIR__.'/../vendor/compiled.php';

if (file_exists($compiledPath))
{
    require $compiledPath;
}
</pre>

<pre>
# 获取应用程序实例
$app = require_once __DIR__.'/../bootstrap/<a href="bootstrap/app.php">app.php</a>';
</pre>

<pre class="l2">
# 实例化应用程序
$app = new Illuminate\Foundation\Application(
    // 应用程序基础路径（根目录）
    // realpath() 返回规范化的绝对路径名
    // 在 Windows 上，realpath() 会将 unix 风格的路径改成 Windows 风格的。
    realpath(__DIR__.'/../')
);

# 绑定重要接口
// $app->singleton(); 注册单例
// <a href="vendor/laravel/framework/src/Illuminate/Container/Container.php">Illuminate\Container\Container.php</a>@singleton

// http
$app->singleton(
    'Illuminate\Contracts\Http\Kernel',
    'App\Http\Kernel'
);
// 控制台
$app->singleton(
    'Illuminate\Contracts\Console\Kernel',
    'App\Console\Kernel'
);
// 异常处理
$app->singleton(
    'Illuminate\Contracts\Debug\ExceptionHandler',
    'App\Exceptions\Handler'
);

# 返回应用程序实例
return $app;
</pre>

<pre>
# 运行应用程序
$kernel = $app->make('Illuminate\Contracts\Http\Kernel');

$response = $kernel->handle(
    $request = Illuminate\Http\Request::capture()
);

$response->send();

$kernel->terminate($request, $response);
</pre>


      <footer class="site-footer" style="text-align: center;">
        <span class="site-footer-owner"><a href="https://github.com/5-say/learning-laravel-source-code">Learning-laravel-source-code</a> is maintained by <a href="https://github.com/5-say">5-say</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

